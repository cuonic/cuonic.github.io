<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8>
    <title>Mazeball</title>
    <style>
    body { margin: 0; }
    </style>
</head>
<body>
    <div id="viewport"></div>

    <script src="js/three.min.js"></script>
    <script src="js/physi.js"></script>
    <script>
        Physijs.scripts.worker = 'js/physi_worker.js';
        Physijs.scripts.ammo = 'js/ammo.js';

        var initScene, render, renderer, scene, ground, ball, camera;

        // Création de la scène initiale
        initScene = function() {
            // Créer le gestionnaire de rendu
            renderer = new THREE.WebGLRenderer();

            // Definir la taille du rendu
            renderer.setSize( window.innerWidth, window.innerHeight );

            // Definir l'endroit où sera affiché le rendu dans la page HTML
            document.getElementById('viewport').appendChild(renderer.domElement);

            // Créer la scène
            scene = new Physijs.Scene();

            // Definir la gravité
            // scene.setGravity(new THREE.Vector3( 0, -30, 0 ));

            // Initialiser la caméra
            camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.set(60, 50, 60);
            camera.lookAt(scene.position);

            // Ajouter la caméra à la scène
            scene.add(camera);

            // ---
            // Sol
            // ---

            // Definir la géometrie du sol (cube)
            groundGeometry = new THREE.CubeGeometry(30, 1, 30);

            // Definir le materiau à utiliser pour le sol
            groundMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });

            // Créer le sol
            ground = new Physijs.BoxMesh(groundGeometry, groundMaterial, 0);

            // Ajouter le sol à la scène
            scene.add(ground);

            // -----
            // Balle
            // -----

            

            // Definit la géometrie de la balle (sphere)
            ballGeometry = new THREE.SphereGeometry(2.5, 10, 10);

            // Definir le materiau à utiliser pour la balle
            ballMaterial = new THREE.MeshBasicMaterial({color: 0xffff00});

            // Créer la balle
            ball = new Physijs.SphereMesh(ballGeometry, ballMaterial);

            // Definir la position de la balle
            ball.position.set(
                0,
                10,
                0
            );
            

            // Ajouter à la scène
            scene.add(ball);

            scene.simulate();
            requestAnimationFrame(render);
        };

        render = function() {
            // Simuler les mouvements physiques de la scène
            scene.simulate();

            // Faire le rendu de la scène
            renderer.render(scene, camera);

            requestAnimationFrame(render);
        };

        // Dès que la page est chargée, initialiser la scène
        window.onload = initScene();
    </script>
</body>
</html>
